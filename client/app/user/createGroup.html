<div class="col-md-12" ng-controller="CreateGroupCtrl as Create">
  <div class="container">
    <h1>Create a Group</h1>

    <form name="memberForm" ng-submit="Create.newGroup.invited.length > 1 && memberForm.$valid && Create.createGroup(Create.newGroup)" novalidate>
      <label>Group Name:</label>
      <input ng-model="Create.newGroup.groupName" name="groupName" required/>
      <p class="groupNameError" ng-show="memberForm.groupName.$error.required">*A group name is required.</p>
      <br></br>

      <button ng-click="Create.addMember($event)">Add Member</button>
      <p>Members:</p>
      <div ng-repeat="invite in Create.newGroup.invited">
        <label>Name: </label>
        <input name="formName" ng-model="invite.name" required/>
        <label>Email Address: </label>
        <input name="formEmail" ng-model="invite.email" required>
        {{invite.validity}}
        <p ng-show="!invite.validity && memberForm.formEmail.$dirty && memberForm.$valid">*You must enter a valid gmail email.</p>
        <button class="btn btn-xs btn-danger" ng-click="Create.deleteMember($index)">Delete</button>
      </div>
      <p ng-show="Create.newGroup.invited.length < 2">*You need at least two members</p>
      <p ng-show="memberForm"></p>

      <input type="submit" value="Create New Group">
    </form>


    <h4>Group Created</h4>
    <p>Group Name: {{groupCreated.groupName}}</p>
    <p>Admin: {{groupCreated.admin}}</p>
    <p>Invited: </p>
    <ul ng-repeat="invite in groupCreated.invited">
      <li>{{invite.email}}</li>
    </ul>
    <p>Users:</p>
    <ul ng-repeat="user in groupCreated.users">
      <li>{{user}}</li>
    </ul>
  </div>
</div> 